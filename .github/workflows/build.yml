name: Build and Release

on: [push]


jobs:
  build:
    name: Build APK
    runs-on: ubuntu-22.04
    steps:
      - name: clone repo
        uses: actions/checkout@v1
      - name: setup flutter
        run: sudo snap install flutter --classic
      - name: flutter version
        run: flutter doctor
      - name: accecpt licences
        run:  yes | flutter doctor --android-licenses
      - name: build APK
        run: flutter build apk --split-per-abi
      - name: tree view
        run: tree build/
      - name: upload to release
        uses: softprops/action-gh-release@v1
        with:
          tag_name: master
          files: build/app/outputs/flutter-apk/*
